        <!-- æˆåŠŸè¿‡æ¸¡é¡µ -->
        <div id="successPage">
            <h2 style="color: #ff69b4; margin-bottom: 30px;">ğŸ‰ éªŒè¯æˆåŠŸï¼</h2>
            <p style="font-size: 18px; margin-bottom: 40px;">å³å°†ä¸ºä½ æ‰“å¼€çˆ±çš„è®°å¿†...</p>
        </div>
    </div>

    <!-- â­ï¸æœ€ç»ˆå±•ç¤ºé¡µé¢ï¼ˆç‹¬ç«‹å®¹å™¨ï¼‰ -->
    <div class="main-container" id="finalPage">
        <h2 style="color: #ff69b4; margin-bottom: 30px;">ğŸ‰ è®°å¿†é‡ç°æ—¶åˆ» ğŸ‰</h2>
        <div class="photo-frame">
            <!-- â­ï¸æ›¿æ¢ä»¥ä¸‹å›¾ç‰‡é“¾æ¥ -->
            <img src="https://example.com/your-image.jpg" alt="æˆ‘ä»¬çš„è®°å¿†">
        </div>
        <button onclick="downloadSecret()" style="margin-top: 40px;">ä¸‹è½½çˆ±çš„è®°å¿†æ–‡ä»¶</button>
    </div>

    <!-- â­ï¸éŸ³ä¹æ’­æ”¾å™¨ï¼ˆç¡®è®¤éŸ³ä¹é“¾æ¥æœ‰æ•ˆï¼‰ -->
    <audio id="backgroundMusic" src="https://github.com/younotfaraway/heartdate/blob/main/1905159807.mp3"></audio>

    <script>
        // éŸ³ä¹æ§åˆ¶é€»è¾‘
        let music = document.getElementById('backgroundMusic');
        
        function playMusic() {
            try {
                music.play();
                document.getElementById('playButton').style.display = 'none';
            } catch (error) {
                alert('éŸ³ä¹æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®');
            }
        }

        // æ—¥æœŸé€‰æ‹©å™¨åˆå§‹åŒ–
        function initDatePicker() {
            const yearSelect = document.getElementById('yearSelect');
            yearSelect.innerHTML = '<option value="" disabled selected>é€‰æ‹©å¹´ä»½</option>';
            for(let y = 2025; y >= 2000; y--) {
                const option = new Option(y + 'å¹´', y);
                yearSelect.add(option);
            }

            const monthSelect = document.getElementById('monthSelect');
            monthSelect.innerHTML = '<option value="" disabled selected>é€‰æ‹©æœˆä»½</option>';
            for(let m = 1; m <= 12; m++) {
                monthSelect.add(new Option(m + 'æœˆ', m));
            }
            updateDays();
        }

        // æ—¥æœŸæ›´æ–°é€»è¾‘
        function updateDays() {
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);
            const daySelect = document.getElementById('daySelect');
            daySelect.innerHTML = '<option value="" disabled selected>é€‰æ‹©æ—¥æœŸ</option>';
            
            if(year && month) {
                const daysInMonth = new Date(year, month, 0).getDate();
                for(let d = 1; d <= daysInMonth; d++) {
                    daySelect.add(new Option(d + 'æ—¥', d));
                }
            }
        }

        // â­ï¸æ ¸å¿ƒéªŒè¯é€»è¾‘
        function validateAnswers() {
            const errorMsg = document.getElementById('errorMsg');
            errorMsg.style.display = 'none';

            // è·å–ç”¨æˆ·è¾“å…¥
            const userYear = parseInt(yearSelect.value);
            const userMonth = parseInt(monthSelect.value);
            const userDay = parseInt(daySelect.value);
            const userDays = parseInt(document.getElementById('daysInput').value);

            // è®¡ç®—æ­£ç¡®ç­”æ¡ˆ
            const correctDate = new Date(2024, 1, 3); // æœˆä»½ä»0å¼€å§‹è®¡æ•°ï¼ˆ1è¡¨ç¤ºäºŒæœˆï¼‰
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const correctDays = Math.floor((today - correctDate) / (1000 * 3600 * 24));

            // éªŒè¯ç»“æœå¤„ç†
            if(userYear === 2024 && userMonth === 2 && userDay === 3 && userDays === correctDays) {
                showFinalPage();
            } else {
                showError();
            }
        }

        // é¡µé¢è·³è½¬æ§åˆ¶
        function showFinalPage() {
            document.getElementById('questionPage').style.display = 'none';
            document.getElementById('successPage').style.display = 'block';
            document.querySelector('.step-indicator').textContent = 'ç¬¬2æ­¥/å…±3æ­¥';

            setTimeout(() => {
                document.getElementById('successPage').style.display = 'none';
                document.getElementById('finalPage').style.display = 'block';
                document.querySelector('.step-indicator').textContent = 'ç¬¬3æ­¥/å…±3æ­¥';
            }, 3000);
        }

        // â­ï¸æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ï¼ˆæ›¿æ¢ä¸‹è½½é“¾æ¥ï¼‰
        function downloadSecret() {
            const link = document.createElement('a');
            link.href = 'https://github.com/younotfaraway/heartdate/blob/main/%E4%BA%B2%E7%88%B1%E7%9A%84%E6%B1%9D.pdf'; // æ›¿æ¢ä¸ºå®é™…æ–‡ä»¶åœ°å€
            link.download = 'çˆ±çš„ç§˜å¯†.txt';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // é”™è¯¯æç¤ºå¤„ç†
        function showError() {
            const errorMsg = document.getElementById('errorMsg');
            errorMsg.style.display = 'block';
            setTimeout(() => errorMsg.style.display = 'none', 3000);
        }

        // éŸ³ä¹çŠ¶æ€ä¿æŒ
        window.addEventListener('beforeunload', () => {
            localStorage.setItem('musicTime', music.currentTime);
            localStorage.setItem('musicPlaying', !music.paused);
        });

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            const savedTime = localStorage.getItem('musicTime');
            const wasPlaying = localStorage.getItem('musicPlaying') === 'true';
            
            if (savedTime) {
                music.currentTime = savedTime;
                if (wasPlaying) {
                    music.play();
                    document.getElementById('playButton').style.display = 'none';
                }
            }
            
            initDatePicker();
            document.getElementById('yearSelect').addEventListener('change', updateDays);
            document.getElementById('monthSelect').addEventListener('change', updateDays);
        });
    </script>
</body>
</html>
